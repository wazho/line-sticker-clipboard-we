(this["webpackJsonpline-sticker-clipboard-web"]=this["webpackJsonpline-sticker-clipboard-web"]||[]).push([[0],{128:function(e,t,n){e.exports=n(219)},133:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(7),i=n.n(r),l=(n(133),n(58)),s=n(21),o=n(222),u=n(224),m=n(64);n(67);var d=function(e){return c.a.createElement(c.a.Fragment,null,"\u529f\u80fd\u88fd\u4f5c\u4e2d ... \u518d\u7b49\u7b49\u54e6\uff01")},f=n(59),b=n(225),h=n(220),p=n(44),k=n(23),g=n(223),E=n(84),j=n.n(E),O=n(227),y=n(226),v=n(31),S=n(221);function C(e){var t=new Image,n=document.createElement("canvas"),a=n.getContext("2d");return t.crossOrigin="",t.src=e,new Promise((function(e){t.onload=function(){n.width=this.naturalWidth,n.height=this.naturalHeight,console.log(this),a.drawImage(this,0,0),n.toBlob((function(t){e(t)}),"image/png",.75)}}))}function w(){var e=Object(l.a)(["\n    .sticker {\n        cursor: pointer;\n    }\n"]);return w=function(){return e},e}var I="https://asia-east2-line-sticker-fetcher.cloudfunctions.net";var N=Object(m.a)((function(e){var t=e.className,n=e.productId,r=e.stickerResourceType,i=Object(a.useState)("static"),l=Object(s.a)(i,2),o=l[0],u=l[1],m=Object(a.useState)(!1),d=Object(s.a)(m,2),b=d[0],g=d[1],E=Object(a.useState)([]),w=Object(s.a)(E,2),N=w[0],x=w[1],z=Object(a.useCallback)((function(){g(!1)}),[]),M=Object(a.useCallback)((function(e){var t,n;return j.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.a.awrap(C(e));case 2:t=a.sent,n=new window.ClipboardItem({"image/png":t}),navigator.clipboard.write([n]),O.a.success({message:"\u8907\u88fd\u6210\u529f",description:"\u5df2\u7d93\u5c07\u8a9e\u6cd5\u8907\u88fd\u5230\u526a\u8cbc\u7c3f\u56c9\uff01",placement:"bottomRight"});case 6:case"end":return a.stop()}}))}),[]);return Object(a.useEffect)((function(){var e=Object(f.stringify)({productId:n}),t="".concat(I,"/get-stickers?").concat(e);x({}),fetch(t).then((function(e){return e.json()})).then((function(e){if(/ANIMATION/.test(r)){var t=e.map((function(e){return e.replace("sticker.png","sticker_animation.png")}));x({static:e,animation:t})}else x({static:e})})),g(!!n)}),[n,r]),c.a.createElement(y.a,{className:t,width:800,visible:b,title:"\u9078\u64c7\u559c\u6b61\u7684\u8cbc\u5716",footer:null,onCancel:z},c.a.createElement(v.a.Group,null,N.static&&c.a.createElement(v.a,{type:"static"===o?"primary":"default",size:"large",children:"\u975c\u614b\u8cbc\u5716",onClick:u.bind(null,"static")}),N.animation&&c.a.createElement(v.a,{type:"animation"===o?"primary":"default",size:"large",children:"\u52d5\u614b\u8cbc\u5716",onClick:u.bind(null,"animation")})),c.a.createElement(h.a,null),c.a.createElement("p",null,"\u9ede\u64ca\u5c07\u8cbc\u5716\u52a0\u5165\u81f3\u8490\u85cf\u5eab\u7576\u4e2d"),c.a.createElement(p.a,{gutter:[16,16]},N[o]&&N[o].map((function(e,t){return c.a.createElement(k.a,{key:t,xs:12,sm:8,md:6,lg:6,xl:6,onClick:M.bind(null,e)},c.a.createElement(S.a,{className:"sticker",shape:"square",size:128,src:e}))}))))}))(w()),x="https://asia-east2-line-sticker-fetcher.cloudfunctions.net";var z=function(e){var t=this,n=Object(a.useState)("\u5496\u6ce2"),r=Object(s.a)(n,2),i=r[0],l=r[1],o=Object(a.useState)([]),u=Object(s.a)(o,2),m=u[0],d=u[1],E=Object(a.useState)(null),j=Object(s.a)(E,2),O=j[0],y=j[1],v=Object(a.useState)(null),S=Object(s.a)(v,2),C=S[0],w=S[1],I=Object(a.useCallback)((function(e,t){y(e),w(t)}),[]);return Object(a.useEffect)((function(){var e=Object(f.stringify)({query:i,limit:50}),t="".concat(x,"/search-products?").concat(e);fetch(t).then((function(e){return e.json()})).then((function(e){return d(e.items)}))}),[i]),c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a.Search,{size:"large",enterButton:"\u641c\u5c0b\u8cbc\u5716",defaultValue:i,onSearch:function(e){return l(e)}}),c.a.createElement(h.a,null),c.a.createElement(p.a,{gutter:[16,16]},m.map((function(e){return c.a.createElement(k.a,{key:e.id,xs:12,sm:8,md:6,lg:4,xl:3},c.a.createElement(g.a,{hoverable:!0,size:"small",cover:c.a.createElement("img",{alt:e.title,src:e.listIcon.src}),style:{minWidth:150},onClick:I.bind(t,e.id,e.stickerResourceType)},c.a.createElement(g.a.Meta,{title:e.title,description:e.authorName})))}))),c.a.createElement(N,{productId:O,stickerResourceType:C}))};function M(){var e=Object(l.a)(["\n    .top-menu * {\n        display: inline-block;\n\n        &.site-title {\n            color: #00c300;\n            font-size: 1.15em;\n            margin-right: 2em;\n        }\n    }\n"]);return M=function(){return e},e}var H={myStickerCollection:"\u6211\u7684\u8cbc\u5716\u6536\u85cf\u5eab",searchMoreStickers:"\u641c\u5c0b\u5176\u5b83\u8cbc\u5716"};var R=Object(m.a)((function(e){var t=e.className,n=Object(a.useState)(H.myStickerCollection),r=Object(s.a)(n,2),i=r[0],l=r[1],m=Object(a.useCallback)((function(e){var t=e.key;l(t)}),[]);return c.a.createElement("div",{className:t},c.a.createElement(o.a,null,c.a.createElement(o.a.Header,{className:"top-menu"},c.a.createElement("div",{className:"site-title",children:"LINE \u8cbc\u5716\u96a8\u610f\u8cbc"}),c.a.createElement(u.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:i,style:{lineHeight:"64px"},onSelect:m},c.a.createElement(u.a.Item,{key:H.myStickerCollection,children:H.myStickerCollection}),c.a.createElement(u.a.Item,{key:H.searchMoreStickers,children:H.searchMoreStickers}))),c.a.createElement(o.a.Content,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},i===H.myStickerCollection&&c.a.createElement(d,null),i===H.searchMoreStickers&&c.a.createElement(z,null)),c.a.createElement(o.a.Footer,null,"Design by Salmon (salmon.tw)")))}))(M());i.a.render(c.a.createElement(R,null),document.getElementById("root"))},67:function(e,t,n){}},[[128,1,2]]]);
//# sourceMappingURL=main.0b3c95dd.chunk.js.map